@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
  line-height: 1.5;
  font-weight: 400;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Markdown样式优化 - 支持rehype-raw处理的HTML内容 */
/* 基础段落样式 */
.prose p {
  margin-top: 0.75em !important;
  margin-bottom: 0.75em !important;
  line-height: 1.7 !important;
  white-space: pre-wrap !important;
}

/* 确保换行正确显示 */
.prose br {
  content: "";
  display: block;
  margin: 0.5em 0;
}

/* 列表样式 */
.prose ul,
.prose ol {
  margin-top: 1em !important;
  margin-bottom: 1em !important;
  padding-left: 1.5em !important;
}

.prose li {
  margin-top: 0.25em !important;
  margin-bottom: 0.25em !important;
}

/* 代码块样式 */
.prose pre {
  font-size: 0.875em !important;
  background-color: #f5f5f5 !important;
  padding: 1em !important;
  border-radius: 0.375rem !important;
  overflow-x: auto !important;
  margin-top: 1em !important;
  margin-bottom: 1em !important;
}

.prose code {
  font-size: 0.875em !important;
  background-color: #f5f5f5 !important;
  padding: 0.125em 0.25em !important;
  border-radius: 0.25rem !important;
}

/* 标题样式优化 - 确保所有标题级别都能正确渲染 */
.prose h1 {
  font-size: 1.8em !important;
  font-weight: 700 !important;
  margin-top: 1.5em !important;
  margin-bottom: 0.75em !important;
  line-height: 1.2 !important;
  color: inherit !important;
}

.prose h2 {
  font-size: 1.5em !important;
  font-weight: 600 !important;
  margin-top: 1.25em !important;
  margin-bottom: 0.75em !important;
  line-height: 1.2 !important;
  color: inherit !important;
}

.prose h3 {
  font-size: 1.3em !important;
  font-weight: 600 !important;
  margin-top: 1em !important;
  margin-bottom: 0.5em !important;
  line-height: 1.2 !important;
  color: inherit !important;
}

.prose h4 {
  font-size: 1.15em !important;
  font-weight: 600 !important;
  margin-top: 0.75em !important;
  margin-bottom: 0.5em !important;
  line-height: 1.2 !important;
  color: inherit !important;
}

.prose h5 {
  font-size: 1em !important;
  font-weight: 600 !important;
  margin-top: 0.75em !important;
  margin-bottom: 0.5em !important;
  line-height: 1.2 !important;
  color: inherit !important;
}

.prose h6 {
  font-size: 0.9em !important;
  font-weight: 600 !important;
  margin-top: 0.75em !important;
  margin-bottom: 0.5em !important;
  line-height: 1.2 !important;
  color: inherit !important;
}

/* 确保类似 ####1. 这样的标题格式能正确显示 */
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  display: block !important;
  margin-top: 1em !important;
  margin-bottom: 0.5em !important;
  font-weight: 600 !important;
  line-height: 1.2 !important;
}

.prose h1 > code,
.prose h2 > code,
.prose h3 > code,
.prose h4 > code,
.prose h5 > code,
.prose h6 > code {
  background: none !important;
  padding: 0 !important;
  font-size: inherit !important;
  font-weight: inherit !important;
  color: inherit !important;
}

/* 分隔线样式 */
.prose hr {
  border: none !important;
  height: 2px !important;
  background-color: #e5e7eb !important;
  margin: 1.5em 0 !important;
}

/* 链接样式 */
.prose a {
  color: #3b82f6 !important;
  text-decoration: underline !important;
  font-weight: 500 !important;
}

/* 引用块样式 */
.prose blockquote {
  border-left: 4px solid #e5e7eb !important;
  padding-left: 1em !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  margin-top: 1em !important;
  margin-bottom: 1em !important;
  font-style: italic !important;
}

/* 表格样式 - 确保表格能正确显示 */
.prose table {
  width: 100% !important;
  border-collapse: collapse !important;
  margin-top: 1em !important;
  margin-bottom: 1em !important;
  display: table !important;
}

.prose thead {
  background-color: #f9fafb !important;
}

.prose th,
.prose td {
  padding: 0.5em 1em !important;
  border: 1px solid #e5e7eb !important;
  text-align: left !important;
}

.prose th {
  font-weight: 600 !important;
}

/* 确保在暗色模式下也能正确显示 - 适配rehype-raw处理的HTML内容 */
.dark .prose pre {
  background-color: #1f2937 !important;
}

.dark .prose code {
  background-color: #1f2937 !important;
}

.dark .prose hr {
  background-color: #374151 !important;
}

.dark .prose blockquote {
  border-left-color: #374151 !important;
}

.dark .prose thead {
  background-color: #1f2937 !important;
}

.dark .prose th,
.dark .prose td {
  border-color: #374151 !important;
}

/* 确保Markdown内容在流式输出时也能正确渲染 */
/* 自定义动画 */
@keyframes spin-slow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes spin-slow-reverse {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(-360deg);
  }
}

/* 头像悬停提示动画 */
@keyframes pulse-soft {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.user-avatar-container:hover {
  animation: pulse-soft 1s infinite;
}

.animate-spin-slow {
  animation: spin-slow 20s linear infinite;
}

.animate-spin-slow-reverse {
  animation: spin-slow-reverse 25s linear infinite;
}

/* Markdown内容动画 */
.prose.animate-pulse p,
.prose.animate-pulse h1,
.prose.animate-pulse h2,
.prose.animate-pulse h3,
.prose.animate-pulse h4,
.prose.animate-pulse h5,
.prose.animate-pulse h6,
.prose.animate-pulse ul,
.prose.animate-pulse ol,
.prose.animate-pulse pre,
.prose.animate-pulse code,
.prose.animate-pulse blockquote,
.prose.animate-pulse table,
.prose.animate-pulse th,
.prose.animate-pulse td {
  animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite !important;
}

/* 覆盖默认的prose样式，确保所有元素都能正确显示 */
.prose :where(p):not(:where([class~="not-prose"] *)) {
  margin-top: 0.75em !important;
  margin-bottom: 0.75em !important;
}

.prose :where(ul):not(:where([class~="not-prose"] *)) {
  margin-top: 1em !important;
  margin-bottom: 1em !important;
  padding-left: 1.5em !important;
}

.prose :where(ol):not(:where([class~="not-prose"] *)) {
  margin-top: 1em !important;
  margin-bottom: 1em !important;
  padding-left: 1.5em !important;
}

/* 确保表格在任何情况下都显示 */
.prose :where(table):not(:where([class~="not-prose"] *)) {
  display: table !important;
  width: 100% !important;
}